# PCF Solution Build Configuration
# This file defines the configuration for building and packaging PCF controls into Power Platform solutions

# Solution Information (maps to Solution.xml <SolutionManifest> section)
solution:
  # Maps to <SolutionManifest><UniqueName>
  uniqueName: "PCFFluentUiAutoCompleteGooglePlaces"
  # Maps to <SolutionManifest><LocalizedNames><LocalizedName description="">
  localizedName: "PCF FluentUI Google Address AutoComplete"
  # Maps to <SolutionManifest><Descriptions><Description description="">
  description: "A Google Places autocomplete control using React and FluentUI. Provides address search functionality with Google Places API integration."
  # Maps to <SolutionManifest><Version>
  version: "2025.08.03.01"
  # Project GUID - ensures consistent solution identity across rebuilds
  projectGuid: "5e9de1b4-a755-483b-9a09-7aaf6e2836d1"

# Publisher Information (maps to Solution.xml <Publisher> section)
publisher:
  # Maps to <Publisher><UniqueName>
  uniqueName: "err403"
  # Maps to <Publisher><LocalizedNames><LocalizedName description="">
  localizedName: "err403.com (Gareth Cheyne)"
  # Maps to <Publisher><Descriptions><Description description="">  
  description: "err403.com (Gareth Cheyne)"
  # Maps to <Publisher><CustomizationPrefix>
  customizationPrefix: "err403"

# Build Configuration
build:
  # Node.js version to use
  nodeVersion: "18"

  # .NET version for Power Platform CLI
  dotnetVersion: "6.0.x"

  # Build configuration (Release or Debug)
  configuration: "Release"

  # Whether to run npm ci (clean install) vs npm install
  cleanInstall: true

  # Whether to perform a clean build
  cleanBuild: true

# Solution Structure Configuration
solutionStructure:
  tempDirectory: "solution"
  outputDirectory: "out/controls"

# Package Configuration
package:
  # Whether to create a managed solution package
  createManaged: true

  # Whether to create an unmanaged solution package
  createUnmanaged: true

  # Package naming convention
  namingConvention: "{solution.uniqueName}_{version}"
# GitHub-specific configuration
github:
  # Repository information
  owner: "garethcheyne"
  repository: "PCF-FluentUi-AutoComplete-GooglePlaces"

  # Release configuration
  releases:
    # Whether to create GitHub releases automatically
    createReleases: true

    # Release naming pattern
    namePattern: "v{version}"

    # Whether to mark releases as pre-release
    preRelease: false

    # Release notes configuration
    generateReleaseNotes: true
# Environment Variables (can be overridden)
environment:
  SOLUTION_NAME: "PCFFluentUiAutoCompleteGooglePlaces"
  BUILD_CONFIGURATION: "Release"

# Custom Scripts (optional)
scripts:
  # Pre-build script (PowerShell)
  preBuild: "Write-Host 'Starting pre-build validation for PCF FluentUI Google Address AutoComplete...'"

  # Post-build script (PowerShell)
  postBuild: "Write-Host 'Running post-build validation...'"

  # Pre-package script (PowerShell)
  prePackage: "Write-Host 'Preparing PCF FluentUI Google Address AutoComplete package...'"

  # Post-package script (PowerShell)
  postPackage: "Write-Host 'PCF FluentUI Google Address AutoComplete package created successfully!'"

# Logging Configuration
logging:
  # Log level (Verbose, Info, Warning, Error)
  level: "Info"

  # Whether to show timestamps
  showTimestamps: true

  # Whether to use colors in output
  useColors: true

# Validation Configuration
validation:
  requiredFiles:
    - "PowerPlatformControl.pcfproj"
    - "PCFFluentUiAutoComplete/ControlManifest.Input.xml"
    - "package.json"
  postBuildFiles:
    - "out/controls/PCFFluentUiAutoComplete/bundle.js"
  solutionValidation:
    minPackageSize: 10240

# Project Configuration
project:
  pcfRootPath: "../"